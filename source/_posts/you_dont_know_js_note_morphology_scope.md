---
title: 词法作用域
tags: ['JavaScript']
categories: '你不知道的JavaScript'
---

作用域有两种主要的工作模型，一种是大多数编程语言采用的词法作用域，这也是我们要学习的JavaScript采用的，另一种叫做动态作用域，也有部分语言采用这种。

## 词法阶段

简单的说，词法作用域就是定义在词法阶段的作用域。换句话说，词法作用域就是有你写代码时将变量和块作用域写到哪里决定的。

```
function foo(a){
    var b = a * 2

    function bar(c) {
        console.log(a, b, c)
    }

    bar(b * 3)
}

foo(2) // 2, 4, 12
```
上面代码能很好的帮助我们理解词法作用域，我们可以将这三层嵌套的作用域相称逐级包含的气泡。

1. 全局作用域的气泡。包含foo
2. foo创建的作用域气泡。包含a, bar和b。
3. bar创建的作用域气泡。包含c

我们要输出a,b,c时，去查找这三个变量，首先在所在的作用域气泡中查找，也就是bar中，没有找到的再向上查找，这是很简单的，我们就不一一的看了。

这里我们还要了解一个词-‘遮蔽效应’，其实很简单，就是查找到第一个匹配的标识符时停止查找同意名称的变量在不同的作用域中互不影响。

- 无论函数在哪里调用，也无论如何被调用，他的词法作用域只由函数被声明时所处的位置决定。

## 欺骗词法

其实我们可以修改词法作用域的，但是这种欺骗会导致性能的下降，这里不建议使用。

欺骗词法的两种方法是eval和with，我们也不详细解释了，应该也用不到。

